###############################################################################
#
# IAR ANSI C/C++ Compiler V7.70.1.11437/W32 for ARM       27/Jul/2018  20:43:46
# Copyright 1999-2016 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\app\control\src\direction.c
#    Command line =  
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\app\control\src\direction.c" -D LPLD_K60 -lCN
#        "D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\iar\FLASH\List"
#        -lB "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\FLASH\List" -o
#        "D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\iar\FLASH\Obj"
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M4 -e --fpu=None --dlib_config "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        7.5\arm\INC\c\DLib_Config_Normal.h" -I "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\app\" -I "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\CPU\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\common\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\LPLD\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\LPLD\HW\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\LPLD\DEV\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\uCOS-II\Ports\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\uCOS-II\Source\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\FatFs\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\FatFs\option\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\USB\common\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\USB\driver\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\USB\descriptor\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\USB\class\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\..\..\..\lib\LPLD\FUNC\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\app\driver\inc\"
#        -I "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\app\driver\src\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\app\control\inc\"
#        -I "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\app\control\src\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\app\debug\inc\"
#        -I "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\app\debug\src\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\app\device\src\"
#        -I "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\app\device\inc\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\app\signal\inc\"
#        -I "D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\app\signal\src\" -I
#        "D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\app\system\" -Ol
#        -I "D:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.5\arm\CMSIS\Include\" -D ARM_MATH_CM4
#    Locale       =  Chinese (Simplified)_China.936
#    List file    =  
#        D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\FLASH\List\direction.lst
#    Object file  =  
#        D:\Freescale\ÐÅ±ê\Beacon_C1
#        -NXP\project\Beacon_XBY\iar\FLASH\Obj\direction.o
#
###############################################################################

D:\Freescale\ÐÅ±ê\Beacon_C1 -NXP\project\Beacon_XBY\app\control\src\direction.c
      1          /*=============================================
      2              @file         direction.c
      3              @brief        æ–¹å‘æŽ§åˆ¶      
      4              @programmer   XBY
      5          =============================================*/
      6          
      7          #include "direction.h"
      8          
      9          /*===============================================================
     10          	@brief     çº¿æ€§åŒ–å·®å€¼
     11          	@function  çº¿æ€§åŒ–å¤„ç†ï¼Œèˆµæœºæ‰“è§’ä¸Žå›¾åƒè®¾å®šä¸­å¿ƒå€¼åå·®æˆæ­£æ¯”
     12          	@parameter æ‰“è§’åå·®å€¼
     13          	@return    çº¿æ€§åŒ–å¤„ç†åŽçš„å·®å€¼
     14          	@note      åªä¸ºåˆæœŸé¢„åˆ¤å€¼ï¼ŒåŽæœŸéœ€ç²¾è°ƒ
     15          ==================================================================*/
     16          

   \                                 In section .text, align 2, keep-with-next
     17          float Linear_Offset(float offset)
     18          {
   \                     Linear_Offset: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x0004             MOVS     R4,R0
     19              float offset_temp;
     20              
     21              if(offset >= 30 && offset <= 60)
   \   00000004   0x0020             MOVS     R0,R4
   \   00000006   0x....             LDR.N    R1,??DataTable2  ;; 0x41f00000
   \   00000008   0x.... 0x....      BL       __aeabi_cfrcmple
   \   0000000C   0xD816             BHI.N    ??Linear_Offset_0
   \   0000000E   0x0020             MOVS     R0,R4
   \   00000010   0x....             LDR.N    R1,??DataTable2_1  ;; 0x42700001
   \   00000012   0x.... 0x....      BL       __aeabi_cfcmple
   \   00000016   0xD211             BCS.N    ??Linear_Offset_0
     22              {
     23                offset_temp=offset - 30;
   \   00000018   0x....             LDR.N    R0,??DataTable2_2  ;; 0xc1f00000
   \   0000001A   0x0021             MOVS     R1,R4
   \   0000001C   0x.... 0x....      BL       __aeabi_fadd
     24                offset=(int16)(offset_temp *2 + 30);
   \   00000020   0xF05F 0x4180      MOVS     R1,#+1073741824
   \   00000024   0x.... 0x....      BL       __aeabi_fmul
   \   00000028   0x....             LDR.N    R1,??DataTable2  ;; 0x41f00000
   \   0000002A   0x.... 0x....      BL       __aeabi_fadd
   \   0000002E   0x.... 0x....      BL       __aeabi_f2iz
   \   00000032   0xB200             SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
   \   00000034   0x.... 0x....      BL       __aeabi_i2f
   \   00000038   0x0004             MOVS     R4,R0
   \   0000003A   0xE0A4             B.N      ??Linear_Offset_1
     25              }
     26              else if(offset > 60 && offset <= 90)
   \                     ??Linear_Offset_0: (+1)
   \   0000003C   0x0020             MOVS     R0,R4
   \   0000003E   0x....             LDR.N    R1,??DataTable2_1  ;; 0x42700001
   \   00000040   0x.... 0x....      BL       __aeabi_cfrcmple
   \   00000044   0xD81D             BHI.N    ??Linear_Offset_2
   \   00000046   0x0020             MOVS     R0,R4
   \   00000048   0x....             LDR.N    R1,??DataTable2_3  ;; 0x42b40001
   \   0000004A   0x.... 0x....      BL       __aeabi_cfcmple
   \   0000004E   0xD218             BCS.N    ??Linear_Offset_2
     27              {
     28                offset_temp=offset - 60;
   \   00000050   0x....             LDR.N    R0,??DataTable2_4  ;; 0xc2700000
   \   00000052   0x0021             MOVS     R1,R4
   \   00000054   0x.... 0x....      BL       __aeabi_fadd
     29                offset=(int16)(offset_temp*1.8 + 30 + 30*2);
   \   00000058   0x.... 0x....      BL       __aeabi_f2d
   \   0000005C   0x....             LDR.N    R2,??DataTable2_5  ;; 0xcccccccd
   \   0000005E   0x....             LDR.N    R3,??DataTable2_6  ;; 0x3ffccccc
   \   00000060   0x.... 0x....      BL       __aeabi_dmul
   \   00000064   0x2200             MOVS     R2,#+0
   \   00000066   0x....             LDR.N    R3,??DataTable2_7  ;; 0x403e0000
   \   00000068   0x.... 0x....      BL       __aeabi_dadd
   \   0000006C   0x2200             MOVS     R2,#+0
   \   0000006E   0x....             LDR.N    R3,??DataTable2_8  ;; 0x404e0000
   \   00000070   0x.... 0x....      BL       __aeabi_dadd
   \   00000074   0x.... 0x....      BL       __aeabi_d2iz
   \   00000078   0xB200             SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
   \   0000007A   0x.... 0x....      BL       __aeabi_i2f
   \   0000007E   0x0004             MOVS     R4,R0
   \   00000080   0xE081             B.N      ??Linear_Offset_1
     30              }  
     31              else if(offset > 90)
   \                     ??Linear_Offset_2: (+1)
   \   00000082   0x0020             MOVS     R0,R4
   \   00000084   0x....             LDR.N    R1,??DataTable2_3  ;; 0x42b40001
   \   00000086   0x.... 0x....      BL       __aeabi_cfrcmple
   \   0000008A   0xD81C             BHI.N    ??Linear_Offset_3
     32              {
     33                offset_temp=offset - 90;
   \   0000008C   0x....             LDR.N    R0,??DataTable2_9  ;; 0xc2b40000
   \   0000008E   0x0021             MOVS     R1,R4
   \   00000090   0x.... 0x....      BL       __aeabi_fadd
     34                offset=(int16)(offset_temp*1.5+ 30 + 30*2 + 30*1.8);
   \   00000094   0x.... 0x....      BL       __aeabi_f2d
   \   00000098   0x2200             MOVS     R2,#+0
   \   0000009A   0x....             LDR.N    R3,??DataTable2_10  ;; 0x3ff80000
   \   0000009C   0x.... 0x....      BL       __aeabi_dmul
   \   000000A0   0x2200             MOVS     R2,#+0
   \   000000A2   0x....             LDR.N    R3,??DataTable2_7  ;; 0x403e0000
   \   000000A4   0x.... 0x....      BL       __aeabi_dadd
   \   000000A8   0x2200             MOVS     R2,#+0
   \   000000AA   0x....             LDR.N    R3,??DataTable2_8  ;; 0x404e0000
   \   000000AC   0x.... 0x....      BL       __aeabi_dadd
   \   000000B0   0x2200             MOVS     R2,#+0
   \   000000B2   0x....             LDR.N    R3,??DataTable2_11  ;; 0x404b0000
   \   000000B4   0x.... 0x....      BL       __aeabi_dadd
   \   000000B8   0x.... 0x....      BL       __aeabi_d2iz
   \   000000BC   0xB200             SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
   \   000000BE   0x.... 0x....      BL       __aeabi_i2f
   \   000000C2   0x0004             MOVS     R4,R0
   \   000000C4   0xE05F             B.N      ??Linear_Offset_1
     35              }    
     36              else if(offset <= -30 && offset >= -60)
   \                     ??Linear_Offset_3: (+1)
   \   000000C6   0x0020             MOVS     R0,R4
   \   000000C8   0x....             LDR.N    R1,??DataTable2_12  ;; 0xc1efffff
   \   000000CA   0x.... 0x....      BL       __aeabi_cfcmple
   \   000000CE   0xD216             BCS.N    ??Linear_Offset_4
   \   000000D0   0x0020             MOVS     R0,R4
   \   000000D2   0x....             LDR.N    R1,??DataTable2_4  ;; 0xc2700000
   \   000000D4   0x.... 0x....      BL       __aeabi_cfrcmple
   \   000000D8   0xD811             BHI.N    ??Linear_Offset_4
     37              {
     38                offset_temp=offset + 30;
   \   000000DA   0x....             LDR.N    R0,??DataTable2  ;; 0x41f00000
   \   000000DC   0x0021             MOVS     R1,R4
   \   000000DE   0x.... 0x....      BL       __aeabi_fadd
     39                offset=(int16)(offset_temp*2 - 30);
   \   000000E2   0xF05F 0x4180      MOVS     R1,#+1073741824
   \   000000E6   0x.... 0x....      BL       __aeabi_fmul
   \   000000EA   0x....             LDR.N    R1,??DataTable2_2  ;; 0xc1f00000
   \   000000EC   0x.... 0x....      BL       __aeabi_fadd
   \   000000F0   0x.... 0x....      BL       __aeabi_f2iz
   \   000000F4   0xB200             SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
   \   000000F6   0x.... 0x....      BL       __aeabi_i2f
   \   000000FA   0x0004             MOVS     R4,R0
   \   000000FC   0xE043             B.N      ??Linear_Offset_1
     40              }    
     41              else if(offset < -60 && offset >= -90)
   \                     ??Linear_Offset_4: (+1)
   \   000000FE   0x0020             MOVS     R0,R4
   \   00000100   0x....             LDR.N    R1,??DataTable2_4  ;; 0xc2700000
   \   00000102   0x.... 0x....      BL       __aeabi_cfcmple
   \   00000106   0xD21D             BCS.N    ??Linear_Offset_5
   \   00000108   0x0020             MOVS     R0,R4
   \   0000010A   0x....             LDR.N    R1,??DataTable2_9  ;; 0xc2b40000
   \   0000010C   0x.... 0x....      BL       __aeabi_cfrcmple
   \   00000110   0xD818             BHI.N    ??Linear_Offset_5
     42              {
     43                offset_temp=offset + 60;
   \   00000112   0x....             LDR.N    R0,??DataTable2_13  ;; 0x42700000
   \   00000114   0x0021             MOVS     R1,R4
   \   00000116   0x.... 0x....      BL       __aeabi_fadd
     44                offset=(int16)(offset_temp*1.8 - 30 - 30*2);
   \   0000011A   0x.... 0x....      BL       __aeabi_f2d
   \   0000011E   0x....             LDR.N    R2,??DataTable2_5  ;; 0xcccccccd
   \   00000120   0x....             LDR.N    R3,??DataTable2_6  ;; 0x3ffccccc
   \   00000122   0x.... 0x....      BL       __aeabi_dmul
   \   00000126   0x2200             MOVS     R2,#+0
   \   00000128   0x....             LDR.N    R3,??DataTable2_14  ;; 0xc03e0000
   \   0000012A   0x.... 0x....      BL       __aeabi_dadd
   \   0000012E   0x2200             MOVS     R2,#+0
   \   00000130   0x....             LDR.N    R3,??DataTable2_15  ;; 0xc04e0000
   \   00000132   0x.... 0x....      BL       __aeabi_dadd
   \   00000136   0x.... 0x....      BL       __aeabi_d2iz
   \   0000013A   0xB200             SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
   \   0000013C   0x.... 0x....      BL       __aeabi_i2f
   \   00000140   0x0004             MOVS     R4,R0
   \   00000142   0xE020             B.N      ??Linear_Offset_1
     45              }  
     46              else if(offset < -90)
   \                     ??Linear_Offset_5: (+1)
   \   00000144   0x0020             MOVS     R0,R4
   \   00000146   0x....             LDR.N    R1,??DataTable2_9  ;; 0xc2b40000
   \   00000148   0x.... 0x....      BL       __aeabi_cfcmple
   \   0000014C   0xD21B             BCS.N    ??Linear_Offset_1
     47              {
     48                offset_temp=offset + 90;
   \   0000014E   0x....             LDR.N    R0,??DataTable2_16  ;; 0x42b40000
   \   00000150   0x0021             MOVS     R1,R4
   \   00000152   0x.... 0x....      BL       __aeabi_fadd
     49                offset=(int16)(offset_temp*1.5 - 30 - 30*2 - 30*1.8);
   \   00000156   0x.... 0x....      BL       __aeabi_f2d
   \   0000015A   0x2200             MOVS     R2,#+0
   \   0000015C   0x....             LDR.N    R3,??DataTable2_10  ;; 0x3ff80000
   \   0000015E   0x.... 0x....      BL       __aeabi_dmul
   \   00000162   0x2200             MOVS     R2,#+0
   \   00000164   0x....             LDR.N    R3,??DataTable2_14  ;; 0xc03e0000
   \   00000166   0x.... 0x....      BL       __aeabi_dadd
   \   0000016A   0x2200             MOVS     R2,#+0
   \   0000016C   0x....             LDR.N    R3,??DataTable2_15  ;; 0xc04e0000
   \   0000016E   0x.... 0x....      BL       __aeabi_dadd
   \   00000172   0x2200             MOVS     R2,#+0
   \   00000174   0x....             LDR.N    R3,??DataTable2_17  ;; 0xc04b0000
   \   00000176   0x.... 0x....      BL       __aeabi_dadd
   \   0000017A   0x.... 0x....      BL       __aeabi_d2iz
   \   0000017E   0xB200             SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
   \   00000180   0x.... 0x....      BL       __aeabi_i2f
   \   00000184   0x0004             MOVS     R4,R0
     50              }
     51              
     52              gl_servo_angle = (int32)offset;
   \                     ??Linear_Offset_1: (+1)
   \   00000186   0x0020             MOVS     R0,R4
   \   00000188   0x.... 0x....      BL       __aeabi_f2iz
   \   0000018C   0x....             LDR.N    R1,??DataTable2_18
   \   0000018E   0x6008             STR      R0,[R1, #+0]
     53              
     54              return offset;
   \   00000190   0x0020             MOVS     R0,R4
   \   00000192   0xBD10             POP      {R4,PC}          ;; return
     55          }
     56          
     57          /*===============================================================
     58          	@brief     èˆµæœºæ‰“è§’è¾“å‡ºåŒ¹é…
     59          	@function  æ ¹æ®ä¼ å…¥çš„èˆµæœºæ‰“è§’æˆ–èˆµæœºè¾“å‡ºåŒ¹é…ç›¸åº”çš„è¾“å‡ºæˆ–æ‰“è§’   
     60          	@parameter èˆµæœºæ‰“è§’å€¼æˆ–è¾“å‡ºPWM
     61          	@return    ç›¸åŒ¹é…çš„èˆµæœºæ‰“è§’å€¼æˆ–è¾“å‡ºPWM
     62          	@note      åªä¸ºåˆæœŸé¢„åˆ¤å€¼ï¼ŒåŽæœŸéœ€ç²¾è°ƒ
     63          ==================================================================*/
     64          

   \                                 In section .text, align 2, keep-with-next
     65          int16 Servo_Angle(int angle_servo_temp)
     66          {
   \                     Servo_Angle: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
     67            //èˆµæœºæ‰“è§’ä¸Žè¾“å‡ºåŒ¹é…æ•°ç»„è¡¨ï¼Œå¾…å®š
     68            static int16 gi_angle_servo[2][ANGLE_TABLE_DIMENSION]  = {						
     69              {-36, -35, -34, -33, -32, -31, -30, -29, -28, -27, 
     70              -26, -25, -24, -23, -22, -21, -20, -19, -18, -17, 
     71              -16, -15, -14, -13, -12, -11, -10, -9, -8, -7, 
     72              -6, -5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 
     73              8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 
     74              22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35 ,36},	
     75              {1530, 1500, 1497, 1494, 1491, 1488, 1485, 1483, 1479, 
     76              1476, 1473, 1470, 1467, 1464, 1461, 1458, 1455, 1452, 
     77              1449, 1446, 1443, 1440, 1438, 1436, 1433, 1430, 1427, 
     78              1424, 1421, 1419, 1416, 1413, 1410, 1407, 1404, 1402, 
     79              1400, 1399, 1397, 1392, 1386, 1380, 1374, 1368, 1362, 
     80              1356, 1350, 1344, 1338, 1332, 1326,	1320, 1318, 1316, 
     81              1314, 1312, 1310, 1308, 1306, 1304, 1302, 1300, 1298, 
     82              1296, 1294, 1292, 1290, 1288, 1286, 1284, 1282, 1280, 1270}
     83              };
     84            int loop_i,middle_servo;
     85            
     86            if((angle_servo_temp <= 50) && (angle_servo_temp >= -50))
   \   00000002   0xF110 0x0132      ADDS     R1,R0,#+50
   \   00000006   0x2965             CMP      R1,#+101
   \   00000008   0xD21B             BCS.N    ??Servo_Angle_0
     87            {
     88              angle_servo_temp = (int)Limiter(angle_servo_temp, 36 ,-36);
   \   0000000A   0x....             LDR.N    R2,??DataTable2_19  ;; 0xc2100000
   \   0000000C   0x....             LDR.N    R1,??DataTable2_20  ;; 0x42100000
   \   0000000E   0x000C             MOVS     R4,R1
   \   00000010   0x0015             MOVS     R5,R2
   \   00000012   0x.... 0x....      BL       __aeabi_i2f
   \   00000016   0x002A             MOVS     R2,R5
   \   00000018   0x0021             MOVS     R1,R4
   \   0000001A   0x.... 0x....      BL       Limiter
   \   0000001E   0x.... 0x....      BL       __aeabi_f2iz
     89              for(loop_i=0; loop_i<ANGLE_TABLE_DIMENSION; loop_i++)
   \   00000022   0x2100             MOVS     R1,#+0
   \   00000024   0xE000             B.N      ??Servo_Angle_1
   \                     ??Servo_Angle_2: (+1)
   \   00000026   0x1C49             ADDS     R1,R1,#+1
   \                     ??Servo_Angle_1: (+1)
   \   00000028   0x2949             CMP      R1,#+73
   \   0000002A   0xDA30             BGE.N    ??Servo_Angle_3
     90              {
     91                if(gi_angle_servo[0][loop_i] == angle_servo_temp)
   \   0000002C   0x....             LDR.N    R2,??DataTable2_21
   \   0000002E   0xF932 0x2011      LDRSH    R2,[R2, R1, LSL #+1]
   \   00000032   0x4282             CMP      R2,R0
   \   00000034   0xD1F7             BNE.N    ??Servo_Angle_2
     92                  return gi_angle_servo[1][loop_i];
   \   00000036   0x....             LDR.N    R0,??DataTable2_21
   \   00000038   0xEB00 0x0041      ADD      R0,R0,R1, LSL #+1
   \   0000003C   0xF9B0 0x0092      LDRSH    R0,[R0, #+146]
   \   00000040   0xE025             B.N      ??Servo_Angle_4
     93              }
     94            }
     95            else if((angle_servo_temp <= 1600) && (angle_servo_temp >= 1200))
   \                     ??Servo_Angle_0: (+1)
   \   00000042   0xF5B0 0x6196      SUBS     R1,R0,#+1200
   \   00000046   0xF5B1 0x7FC8      CMP      R1,#+400
   \   0000004A   0xD81D             BHI.N    ??Servo_Angle_5
     96            {
     97              angle_servo_temp = (int)Limiter(angle_servo_temp, 1530, 1270);
   \   0000004C   0x....             LDR.N    R2,??DataTable2_22  ;; 0x449ec000
   \   0000004E   0x....             LDR.N    R1,??DataTable2_23  ;; 0x44bf4000
   \   00000050   0x000C             MOVS     R4,R1
   \   00000052   0x0015             MOVS     R5,R2
   \   00000054   0x.... 0x....      BL       __aeabi_i2f
   \   00000058   0x002A             MOVS     R2,R5
   \   0000005A   0x0021             MOVS     R1,R4
   \   0000005C   0x.... 0x....      BL       Limiter
   \   00000060   0x.... 0x....      BL       __aeabi_f2iz
     98              for(loop_i=0; loop_i<ANGLE_TABLE_DIMENSION; loop_i++)
   \   00000064   0x2100             MOVS     R1,#+0
   \   00000066   0xE000             B.N      ??Servo_Angle_6
     99              {
    100                if(gi_angle_servo[1][loop_i] == angle_servo_temp)
    101                  return gi_angle_servo[1][loop_i];
    102                else if((angle_servo_temp >= gi_angle_servo[1][loop_i]) && (angle_servo_temp <= gi_angle_servo[1][loop_i+1]))
   \                     ??Servo_Angle_7: (+1)
   \   00000068   0x1C49             ADDS     R1,R1,#+1
   \                     ??Servo_Angle_6: (+1)
   \   0000006A   0x2949             CMP      R1,#+73
   \   0000006C   0xDA0F             BGE.N    ??Servo_Angle_3
   \   0000006E   0x....             LDR.N    R2,??DataTable2_21
   \   00000070   0xEB02 0x0241      ADD      R2,R2,R1, LSL #+1
   \   00000074   0xF9B2 0x2092      LDRSH    R2,[R2, #+146]
   \   00000078   0x4282             CMP      R2,R0
   \   0000007A   0xD1F5             BNE.N    ??Servo_Angle_7
   \   0000007C   0x....             LDR.N    R0,??DataTable2_21
   \   0000007E   0xEB00 0x0041      ADD      R0,R0,R1, LSL #+1
   \   00000082   0xF9B0 0x0092      LDRSH    R0,[R0, #+146]
   \   00000086   0xE002             B.N      ??Servo_Angle_4
    103                {
    104                  //èˆµæœºè¾“å‡ºå€¼å¤„äºŽè¾“å‡ºè¡¨ä¸¤å€¼ä¹‹é—´æ—¶ï¼Œæ€»æ˜¯å–ç›¸å¯¹è¾ƒå¤§çš„é‚£ä¸€ä¸ªè§’åº¦å€¼
    105          //        middle_servo = (gi_angle_servo[1][loop_i] + gi_angle_servo[1][loop_i+1]) / 2;
    106          //        if((angle_servo_temp >= middle_servo) && (angle_servo_temp > SERVO_CENTER))
    107          //           return gi_angle_servo[1][loop_i+1];
    108          //        else 
    109          //          return gi_angle_servo[1][loop_i];
    110                }
    111              }
    112            }
    113            else
    114              return 500;//åªæ˜¯ä»£è¡¨ä¸€ä¸ªæ— æ•ˆæ•°å€¼ï¼Œå¦‚æžœä½¿ç”¨0å¯èƒ½ä¸Žèˆµæœºä¸æ‰“è§’ç›¸é‡åˆ
   \                     ??Servo_Angle_5: (+1)
   \   00000088   0xF44F 0x70FA      MOV      R0,#+500
   \   0000008C   0xE7FF             B.N      ??Servo_Angle_4
    115          }
   \                     ??Servo_Angle_3: (+1)
   \                     ??Servo_Angle_4: (+1)
   \   0000008E   0xBD32             POP      {R1,R4,R5,PC}    ;; return

   \                                 In section .data, align 4
   \                     `Servo_Angle::gi_angle_servo`:
   \   00000000   0xFFDC 0xFFDD      DC16 -36, -35, -34, -33, -32, -31, -30, -29, -28, -27, -26, -25, -24
   \              0xFFDE 0xFFDF
   \              0xFFE0 0xFFE1
   \              0xFFE2 0xFFE3
   \              0xFFE4 0xFFE5
   \              0xFFE6 0xFFE7
   \              0xFFE8       
   \   0000001A   0xFFE9 0xFFEA      DC16 -23, -22, -21, -20, -19, -18, -17, -16, -15, -14, -13, -12, -11
   \              0xFFEB 0xFFEC
   \              0xFFED 0xFFEE
   \              0xFFEF 0xFFF0
   \              0xFFF1 0xFFF2
   \              0xFFF3 0xFFF4
   \              0xFFF5       
   \   00000034   0xFFF6 0xFFF7      DC16 -10, -9, -8, -7, -6, -5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8
   \              0xFFF8 0xFFF9
   \              0xFFFA 0xFFFB
   \              0xFFFC 0xFFFD
   \              0xFFFE 0xFFFF
   \              0x0000 0x0001
   \              0x0002 0x0003
   \              0x0004 0x0005
   \              0x0006 0x0007
   \              0x0008       
   \   0000005A   0x0009 0x000A      DC16 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25
   \              0x000B 0x000C
   \              0x000D 0x000E
   \              0x000F 0x0010
   \              0x0011 0x0012
   \              0x0013 0x0014
   \              0x0015 0x0016
   \              0x0017 0x0018
   \              0x0019       
   \   0000007C   0x001A 0x001B      DC16 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 1530, 1500, 1497, 1494
   \              0x001C 0x001D
   \              0x001E 0x001F
   \              0x0020 0x0021
   \              0x0022 0x0023
   \              0x0024 0x05FA
   \              0x05DC 0x05D9
   \              0x05D6       
   \   0000009A   0x05D3 0x05D0      DC16 1491, 1488, 1485, 1483, 1479, 1476, 1473, 1470, 1467, 1464, 1461
   \              0x05CD 0x05CB
   \              0x05C7 0x05C4
   \              0x05C1 0x05BE
   \              0x05BB 0x05B8
   \              0x05B5       
   \   000000B0   0x05B2 0x05AF      DC16 1458, 1455, 1452, 1449, 1446, 1443, 1440, 1438, 1436, 1433, 1430
   \              0x05AC 0x05A9
   \              0x05A6 0x05A3
   \              0x05A0 0x059E
   \              0x059C 0x0599
   \              0x0596       
   \   000000C6   0x0593 0x0590      DC16 1427, 1424, 1421, 1419, 1416, 1413, 1410, 1407, 1404, 1402, 1400
   \              0x058D 0x058B
   \              0x0588 0x0585
   \              0x0582 0x057F
   \              0x057C 0x057A
   \              0x0578       
   \   000000DC   0x0577 0x0575      DC16 1399, 1397, 1392, 1386, 1380, 1374, 1368, 1362, 1356, 1350, 1344
   \              0x0570 0x056A
   \              0x0564 0x055E
   \              0x0558 0x0552
   \              0x054C 0x0546
   \              0x0540       
   \   000000F2   0x053A 0x0534      DC16 1338, 1332, 1326, 1320, 1318, 1316, 1314, 1312, 1310, 1308, 1306
   \              0x052E 0x0528
   \              0x0526 0x0524
   \              0x0522 0x0520
   \              0x051E 0x051C
   \              0x051A       
   \   00000108   0x0518 0x0516      DC16 1304, 1302, 1300, 1298, 1296, 1294, 1292, 1290, 1288, 1286, 1284
   \              0x0514 0x0512
   \              0x0510 0x050E
   \              0x050C 0x050A
   \              0x0508 0x0506
   \              0x0504       
   \   0000011E   0x0502 0x0500      DC16 1282, 1280, 1270
   \              0x04F6       
    116          
    117          /*===============================================================
    118          	@brief     èˆµæœºè¾“å‡ºæŽ§åˆ¶
    119          	@function  ä½ç½®å¼PDæŽ§åˆ¶èˆµæœºä»¥åŠæœ€å°äºŒä¹˜æ³•æ‹Ÿåˆå¾®åˆ†é¡¹
    120          	@note      æœ€å°äºŒä¹˜æ³•é¡¹æ•°æ›´æ”¹ï¼ŒåŽæœŸå°è¯•ä½¿ç”¨è‡ªé€‚åº”PDç³»æ•°
    121          ==================================================================*/
    122          

   \                                 In section .text, align 2, keep-with-next
    123          void Direction_Control()
    124          {
   \                     Direction_Control: (+1)
   \   00000000   0xB51C             PUSH     {R2-R4,LR}
    125              static int last_line_err[5];		//ä¸Šä¸¤æ¬¡åå·®
    126              static float angle_error_Kp;               //å›¾åƒåå·®ä¸Žè§’åº¦å€¼çš„è½¬æ¢ç³»æ•°
    127              float dir_err_temp;
    128              float dir_d_err;
    129              
    130              dir_err_temp = gi_image_err;
   \   00000002   0x....             LDR.N    R0,??DataTable2_24
   \   00000004   0xF9B0 0x0000      LDRSH    R0,[R0, #+0]
   \   00000008   0x.... 0x....      BL       __aeabi_i2f
   \   0000000C   0x0004             MOVS     R4,R0
    131              
    132              //dir_err_temp = Linear_Offset(dir_err_temp);
    133          
    134              last_line_err[0] = last_line_err[1];
   \   0000000E   0x....             LDR.N    R0,??DataTable2_25
   \   00000010   0x6840             LDR      R0,[R0, #+4]
   \   00000012   0x....             LDR.N    R1,??DataTable2_25
   \   00000014   0x6008             STR      R0,[R1, #+0]
    135              last_line_err[1] = last_line_err[2];
   \   00000016   0x....             LDR.N    R0,??DataTable2_25
   \   00000018   0x6880             LDR      R0,[R0, #+8]
   \   0000001A   0x....             LDR.N    R1,??DataTable2_25
   \   0000001C   0x6048             STR      R0,[R1, #+4]
    136              last_line_err[2] = last_line_err[3];
   \   0000001E   0x....             LDR.N    R0,??DataTable2_25
   \   00000020   0x68C0             LDR      R0,[R0, #+12]
   \   00000022   0x....             LDR.N    R1,??DataTable2_25
   \   00000024   0x6088             STR      R0,[R1, #+8]
    137              last_line_err[3] = last_line_err[4];
   \   00000026   0x....             LDR.N    R0,??DataTable2_25
   \   00000028   0x6900             LDR      R0,[R0, #+16]
   \   0000002A   0x....             LDR.N    R1,??DataTable2_25
   \   0000002C   0x60C8             STR      R0,[R1, #+12]
    138              last_line_err[4] = (int)(100*dir_err_temp);
   \   0000002E   0x....             LDR.N    R0,??DataTable2_26  ;; 0x42c80000
   \   00000030   0x0021             MOVS     R1,R4
   \   00000032   0x.... 0x....      BL       __aeabi_fmul
   \   00000036   0x.... 0x....      BL       __aeabi_f2iz
   \   0000003A   0x....             LDR.N    R1,??DataTable2_25
   \   0000003C   0x6108             STR      R0,[R1, #+16]
    139              
    140              least_spuare(last_line_err,3,&dir_d_err,NULL,NULL);
   \   0000003E   0x2000             MOVS     R0,#+0
   \   00000040   0x9000             STR      R0,[SP, #+0]
   \   00000042   0x2300             MOVS     R3,#+0
   \   00000044   0xAA01             ADD      R2,SP,#+4
   \   00000046   0x2103             MOVS     R1,#+3
   \   00000048   0x....             LDR.N    R0,??DataTable2_25
   \   0000004A   0x.... 0x....      BL       least_spuare
    141              dir_d_err /= 100;
   \   0000004E   0x9801             LDR      R0,[SP, #+4]
   \   00000050   0x....             LDR.N    R1,??DataTable2_26  ;; 0x42c80000
   \   00000052   0x.... 0x....      BL       __aeabi_fdiv
   \   00000056   0x9001             STR      R0,[SP, #+4]
    142              
    143              gl_direction_set = (int32)(dir_err_temp * gf_direction_p/100 + dir_d_err * gf_direction_d/100);
   \   00000058   0x....             LDR.N    R0,??DataTable2_27
   \   0000005A   0x6800             LDR      R0,[R0, #+0]
   \   0000005C   0x0021             MOVS     R1,R4
   \   0000005E   0x.... 0x....      BL       __aeabi_fmul
   \   00000062   0x....             LDR.N    R1,??DataTable2_26  ;; 0x42c80000
   \   00000064   0x.... 0x....      BL       __aeabi_fdiv
   \   00000068   0x0004             MOVS     R4,R0
   \   0000006A   0x9901             LDR      R1,[SP, #+4]
   \   0000006C   0x....             LDR.N    R0,??DataTable2_28
   \   0000006E   0x6800             LDR      R0,[R0, #+0]
   \   00000070   0x.... 0x....      BL       __aeabi_fmul
   \   00000074   0x....             LDR.N    R1,??DataTable2_26  ;; 0x42c80000
   \   00000076   0x.... 0x....      BL       __aeabi_fdiv
   \   0000007A   0x0021             MOVS     R1,R4
   \   0000007C   0x.... 0x....      BL       __aeabi_fadd
   \   00000080   0x.... 0x....      BL       __aeabi_f2iz
   \   00000084   0x....             LDR.N    R1,??DataTable2_29
   \   00000086   0x6008             STR      R0,[R1, #+0]
    144              
    145              Sevro_Output(gl_direction_set); 
   \   00000088   0x....             LDR.N    R0,??DataTable2_29
   \   0000008A   0x6800             LDR      R0,[R0, #+0]
   \   0000008C   0xB200             SXTH     R0,R0            ;; SignExt  R0,R0,#+16,#+16
   \   0000008E   0x.... 0x....      BL       Sevro_Output
    146          }
   \   00000092   0xBD13             POP      {R0,R1,R4,PC}    ;; return

   \                                 In section .bss, align 4
   \                     `Direction_Control::last_line_err`:
   \   00000000                      DS8 20

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   0x41F00000         DC32     0x41f00000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_1:
   \   00000000   0x42700001         DC32     0x42700001

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_2:
   \   00000000   0xC1F00000         DC32     0xc1f00000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_3:
   \   00000000   0x42B40001         DC32     0x42b40001

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_4:
   \   00000000   0xC2700000         DC32     0xc2700000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_5:
   \   00000000   0xCCCCCCCD         DC32     0xcccccccd

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_6:
   \   00000000   0x3FFCCCCC         DC32     0x3ffccccc

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_7:
   \   00000000   0x403E0000         DC32     0x403e0000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_8:
   \   00000000   0x404E0000         DC32     0x404e0000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_9:
   \   00000000   0xC2B40000         DC32     0xc2b40000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_10:
   \   00000000   0x3FF80000         DC32     0x3ff80000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_11:
   \   00000000   0x404B0000         DC32     0x404b0000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_12:
   \   00000000   0xC1EFFFFF         DC32     0xc1efffff

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_13:
   \   00000000   0x42700000         DC32     0x42700000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_14:
   \   00000000   0xC03E0000         DC32     0xc03e0000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_15:
   \   00000000   0xC04E0000         DC32     0xc04e0000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_16:
   \   00000000   0x42B40000         DC32     0x42b40000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_17:
   \   00000000   0xC04B0000         DC32     0xc04b0000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_18:
   \   00000000   0x........         DC32     gl_servo_angle

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_19:
   \   00000000   0xC2100000         DC32     0xc2100000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_20:
   \   00000000   0x42100000         DC32     0x42100000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_21:
   \   00000000   0x........         DC32     `Servo_Angle::gi_angle_servo`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_22:
   \   00000000   0x449EC000         DC32     0x449ec000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_23:
   \   00000000   0x44BF4000         DC32     0x44bf4000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_24:
   \   00000000   0x........         DC32     gi_image_err

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_25:
   \   00000000   0x........         DC32     `Direction_Control::last_line_err`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_26:
   \   00000000   0x42C80000         DC32     0x42c80000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_27:
   \   00000000   0x........         DC32     gf_direction_p

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_28:
   \   00000000   0x........         DC32     gf_direction_d

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_29:
   \   00000000   0x........         DC32     gl_direction_set

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      16   Direction_Control
        16   -> Sevro_Output
        16   -> __aeabi_f2iz
        16   -> __aeabi_fadd
        16   -> __aeabi_fdiv
        16   -> __aeabi_fmul
        16   -> __aeabi_i2f
        16   -> least_spuare
       8   Linear_Offset
         8   -> __aeabi_d2iz
         8   -> __aeabi_dadd
         8   -> __aeabi_dmul
         8   -> __aeabi_f2d
         8   -> __aeabi_f2iz
         8   -> __aeabi_fadd
         8   -> __aeabi_fmul
         8   -> __aeabi_i2f
         8 __aeabi_cfcmple
         8 __aeabi_cfrcmple
      16   Servo_Angle
        16   -> Limiter
        16   -> __aeabi_f2iz
        16   -> __aeabi_i2f


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_10
       4  ??DataTable2_11
       4  ??DataTable2_12
       4  ??DataTable2_13
       4  ??DataTable2_14
       4  ??DataTable2_15
       4  ??DataTable2_16
       4  ??DataTable2_17
       4  ??DataTable2_18
       4  ??DataTable2_19
       4  ??DataTable2_2
       4  ??DataTable2_20
       4  ??DataTable2_21
       4  ??DataTable2_22
       4  ??DataTable2_23
       4  ??DataTable2_24
       4  ??DataTable2_25
       4  ??DataTable2_26
       4  ??DataTable2_27
       4  ??DataTable2_28
       4  ??DataTable2_29
       4  ??DataTable2_3
       4  ??DataTable2_4
       4  ??DataTable2_5
       4  ??DataTable2_6
       4  ??DataTable2_7
       4  ??DataTable2_8
       4  ??DataTable2_9
     148  Direction_Control
     404  Linear_Offset
     144  Servo_Angle
     292  gi_angle_servo
      20  last_line_err

 
  20 bytes in section .bss
 292 bytes in section .data
 816 bytes in section .text
 
 816 bytes of CODE memory
 312 bytes of DATA memory

Errors: none
Warnings: 3
